# 直接法和光流法

## 直接法和光流法的引入

- 缺陷

    - 计算量大
        
        由于特征点和特征匹配运算量太大如果部署到硬件中，将会占用很大的计算量，
    - 损失信息
        
        损失了图片很多其他信息，没办法充分利用只能形成稀疏图。
    - 特征缺失
        
        在一些如长隧道以及白墙怎么进行特征匹配

- 引入直接法和光流法

    - 光流法

            仍使用特征匹配，关键点，但是不使用描述子去描述关键帧，而是通过光流法跟踪特征子的运动。避免特征匹配，支持进行局部像素跟踪
    - 直接法

            直接根据像素灰度信息来估计相机的运动，对像素进行建模。
        - 对应的优化方法

            最小光度误差（与最小重投影误差用法一样）优化相机运动
        - 产生的地图

            可产生稀疏，稠密，半稠密三种
        - 比较特征法

            只能产生稀疏特征点。为什么？因为在提取图像的信息的时候，只关注了特征点，其余信息被丢弃，然后导致只能产生稀疏图。

## 光流法

- 2d光流法

    - 分类

        LK光流用于建立稀疏图
        HN光流用于建立稠密图

        - LK光流

           -  理想理论假设

            在相邻的两帧图像的灰度不变

           - 具体逻辑

           通过一个三元函数I(x,y,t)入参是x值，y值，时间。返回值是灰度。
           由于灰度不变所以x,y,t增加偏移量然后最后结果相同，泰勒展开。求解
