# BA（捆绑调整）

## BA 是什么

    在计算机视觉中，尤其在多视角集合，SLAM中BA是一种常见的优化方法，
- 通常用来优化相机的外部参数（相机的位姿）包括旋转和位移
-  相机的内部参数，如焦距，光心位置，及畸变系数
-  三维点位置：从不同视角去观测到的3d点的位置。  

## 优化目标
    BA的目标是最小化一个优化问题，通常是重投影误差，每个3D点在多个相机视角投影成2D点，BA的任务是优化相机位姿和3D点的位置，使得所有观测的2D点尽量接近真实的观测位置。
### 与三角化的异同：
 - 异

        三角化是通过多个观测同一个3d点得到的二维坐标通过线性三角化和最小二乘三角化去估计深度信息
        BA 捆绑调整（Bundle Adjustment）是一种全局优化方法，去同时优化所有相机位姿和所有3D点的位置，使图像中的观测点接近真实观测位置，不仅考虑单个3D点的头晕，考虑相机之间的相对关系和3D的全局约束。

 - 同
        
        都是通过多个相机视角，以及三维点去估计相机位姿
### 基本步骤 
- 构建图模型：每个相机和每个3D点都作为图中的一个顶点，观测关系作为边。
- 重投影误差计算 对于每个3D点，通过相机投影模型去计算3D点在相机中的预期位置，然后与实际观测值（2D点） 之间的差异去进行计算
- 优化： 使用非线性优化算法（高斯牛顿法，列文伯格-马夸尔特法）最小化观测的重投影误差，优化相机位姿和3D点位置
- 迭代更新，更新相机的内外参数以及3D点的位置，直到优化收敛
